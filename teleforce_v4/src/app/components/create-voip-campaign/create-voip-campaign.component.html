<div mat-dialog-head class="dilog-head d-flex justify-content-between">
  <h3 class="primary">Create Campaign</h3>
  <div class="d-inline-block">
    <a class="close" (click)="openDialog()"><i class="fi-rr-cross-small"></i></a>
  </div>

</div>
<div mat-dialog-content>
  <!-- <form [formGroup]="addConForm" (change)="formChanged()"> -->
  <form [formGroup]="addConForm" (ngSubmit)="campaignsubmit()">
    <mat-grid-list cols="2" rowHeight="85px" (window:resize)="onResize($event)">
      <mat-grid-tile>
        <!--<mat-form-field class="example-full-width">
          <mat-label>Choose a date</mat-label>
          <input matInput formControlName="startdate" [matDatepicker]="picker">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="addConForm.controls.startdate.hasError('required')">
            Please select date
          </mat-error>
        </mat-form-field>-->
        <mat-form-field class="example-full-width">
          <mat-label>Datetime</mat-label>
          <input matInput [ngxMatDatetimePicker]="picker" placeholder="Choose a date & time"
            formControlName="startdate">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <ngx-mat-datetime-picker #picker></ngx-mat-datetime-picker>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field class="example-full-width">
          <mat-label>Campaign Name</mat-label>
          <input matInput formControlName="campaignname" placeholder="Campaign Name" value="">
          <mat-error *ngIf="addConForm.controls.campaignname.hasError('required')">
            Please enter name
          </mat-error>
        </mat-form-field>
      </mat-grid-tile>
    </mat-grid-list>

    <div class="row">
      <div class="col-xl-6 col-md-6 col-sm-12 col-12 mt-2">
        <mat-radio-group (change)="showaudiofile($event)" formControlName="campaigntype">
          <div style="color:grey;">Campaign type</div>
          <div class="row">
            <div class="col-sm-6">
              <mat-radio-button class="mb-2" color="primary" style="padding:4px 4px 0px 0px;" [value]="1">Lead assign to
                Agent
              </mat-radio-button>
            </div>
            <div class="col-sm-6" *ngIf="progressivedialer">
              <mat-radio-button class="mb-2" color="primary" style="padding:4px 0px 0px 24px;" [value]="0">Outbound
                Calling
              </mat-radio-button>
            </div>
          </div>
          <mat-error *ngIf="addConForm.controls.campaigntype.hasError('required')">
            Please select type
          </mat-error>
        </mat-radio-group>
      </div>
      <div class="col-xl-6 col-md-6 col-sm-12 col-12 mt-2">
        <mat-radio-group  *ngIf="show" formControlName="campaignmethod" >
          <div style="color:grey;">Campaign Method</div>
          <div class="row">
            <div class="col-sm-4">
              <mat-radio-button color="primary" *ngIf="progressivedialer" style="padding:4px 4px 0px 0px;" [value]="0">
                Live Agent
              </mat-radio-button>
            </div>
            <!--<div class="col-sm-4">
              <mat-radio-button *ngIf="isobd" color="primary" style="padding:4px 0px 0px 10px;" [value]="1"> OBD
              </mat-radio-button>
            </div>-->
            <!-- <div class="col-sm-4">
              <mat-radio-button *ngIf="isobd" color="primary" style="padding:4px 0px 0px 10px;" [value]="2"> Mobile
                Dialer
              </mat-radio-button>
            </div> -->
          </div>
          
        </mat-radio-group>
      </div>
    </div>

    <mat-grid-list cols="2" [cols]="breakpoint" rowHeight="85px" (window:resize)="onResize($event)">
      <mat-grid-tile *ngIf="ivvr">
        <mat-form-field class="example-full-width">
          <mat-label>IVR List</mat-label>
          <mat-select (selectionChange)="change5($event.value)" formControlName="ivr" required>
            <mat-option *ngFor="let topping of ivr" [value]="topping.BuilderID">{{topping.IvrName}}</mat-option>
            <mat-error *ngIf="addConForm.controls.ivr.hasError('required')">
              Please select IVR
            </mat-error>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile *ngIf="dialershow">
        <mat-form-field class="example-full-width mt-5">
          <mat-label>Dialer Type</mat-label>
          <mat-select formControlName="dialertype" required (selectionChange)="getassignagents($event.value)">
            <mat-option value="0">Progressive</mat-option>
            <mat-option value="1" >Predictive</mat-option>
            <mat-error *ngIf="addConForm.controls.dialertype.hasError('required')">
              Please select Dialer type
            </mat-error>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile *ngIf="agentshow">
        <mat-form-field class="example-full-width mt-5">
          <mat-label>Agent Group</mat-label>
          <mat-select (selectionChange)="change($event.value)" formControlName="agentgroup">
            <mat-option *ngFor="let topping of agent" [value]="topping.GroupID">
              {{topping.GroupName}}({{topping.GroupDescription}})</mat-option>
            <mat-error *ngIf="addConForm.controls.agentgroup.hasError('required')">
              Please select Agent Group
            </mat-error>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile *ngIf="agentshow">
        <mat-form-field class="example-full-width mt-5">
          <mat-label>Agent list</mat-label>
          <mat-select (selectionChange)="change2($event.value)" multiple formControlName="agents">
            <mat-option *ngFor="let topping of category" [value]="topping.account_id">{{topping.account_name}}
            </mat-option>
            <mat-error *ngIf="addConForm.controls.agents.hasError('required')">
              Please select Agent
            </mat-error>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
     
      <mat-grid-tile>        
        <mat-form-field class="example-full-width">
          <mat-label>Segements</mat-label>
          <mat-select (selectionChange)="chang($event.value)" multiple formControlName="segments" required>
            <mat-option *ngFor="let topping of csegments" [value]="topping.cont_id" readonly>{{topping.name}}</mat-option>
          </mat-select>
          <mat-error *ngIf="addConForm.controls.segments.hasError('required')">
            Please select segment
          </mat-error>
        </mat-form-field>
       
      </mat-grid-tile>
      
      <mat-grid-tile *ngIf="showdid">
        <mat-form-field class="example-full-width">
          <mat-label>Assign DID</mat-label>
          <mat-select (selectionChange)="change4($event.value)" multiple formControlName="did" required>
            <mat-option *ngFor="let topping of did" [value]="topping.did">{{topping.did_number}}</mat-option>
          </mat-select>
          <mat-error *ngIf="addConForm.controls.did.hasError('required')">
            Please select Did
          </mat-error>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile *ngIf="callratiomode">
        <mat-form-field class="example-full-width">
          <mat-label>Call Ratio (1:)</mat-label>
          <mat-select formControlName="callratio">
            <mat-option value="1">1</mat-option>
            <mat-option value="2">2</mat-option>
            <mat-option value="3">3</mat-option>
            <mat-option value="4">4</mat-option>
            <mat-option value="5">5</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <!-- <mat-grid-tile *ngIf="ivvr">
          <mat-form-field class="example-full-width">
            <mat-label>Total Agent to Receive Call  </mat-label>
            <input matInput type="number" formControlName="totalagent" placeholder="Total Agent" value="" min="0" [max]="userlimit" required>
            <mat-error *ngIf="addConForm.controls.campaignname.hasError('required')">
              Please enter valid number
            </mat-error>
          </mat-form-field>
        </mat-grid-tile> -->
      <!-- <mat-grid-tile>
          <mat-form-field class="example-full-width">
            <mat-label>New assign call initiated after</mat-label>
            <input matInput formControlName="campaignchannel" placeholder="New assign call initiated after" value="0" maxlength="2">
          </mat-form-field>
        </mat-grid-tile> -->
      <!-- <mat-grid-tile *ngIf="ivvr">
          <mat-form-field class="example-full-width">
            <mat-label>Assign Channel</mat-label>
            <input matInput formControlName="campaignchannel" placeholder="Assign Channel" value="">
            <mat-error *ngIf="addConForm.controls.campaignname.hasError('required')">
              Please enter channel
            </mat-error>
          </mat-form-field>
        </mat-grid-tile> -->
      <!-- <mat-grid-tile *ngIf="ivvr">
          <mat-form-field class="example-full-width">
            <mat-label>Pulse</mat-label>
            <input matInput formControlName="pulse" placeholder="pulse" value="">
            <mat-error *ngIf="addConForm.controls.pulse.hasError('required')">
              Please enter pulse
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile *ngIf="ivvr">
          <mat-form-field class="example-full-width">
            <mat-label>Pulse Rate</mat-label>
            <input matInput formControlName="pulse rate" placeholder="pulserate" value="">
            <mat-error *ngIf="addConForm.controls.pulserate.hasError('required')">
              Please enter pulse
            </mat-error>
          </mat-form-field>
        </mat-grid-tile> -->
    </mat-grid-list>
    <!-- <mat-grid-list cols="2" [cols]="breakpoint" rowHeight="85px" (window:resize)="onResize($event)">
        <mat-grid-tile>
          <mat-form-field class="example-full-width">
            <mat-label>Feedback Forms</mat-label>
            <mat-select formControlName="feedbackform">
              <mat-option *ngFor="let form of feedbackforms" [value]="form.fid">{{form.form_name}}</mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>
      </mat-grid-list>
      <br> -->
    <mat-grid-list cols="3" [cols]="breakpoint" rowHeight="85px" (window:resize)="onResize($event)">
      <mat-grid-tile>
        <mat-form-field class="example-full-width">
          <mat-label>Retry Unanswered Call?</mat-label>
          <mat-select formControlName="retryunansweredcall">
            <mat-option value="no">No</mat-option>
            <mat-option value="yes">Yes</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field class="example-full-width">
          <mat-label>Time Interval</mat-label>
          <mat-select formControlName="retrytime">
            <mat-option value="1">1 Hour</mat-option>
            <mat-option value="1">2 Hour</mat-option>
            <mat-option value="1">3 Hour</mat-option>
            <mat-option value="1">4 Hour</mat-option>
            <mat-option value="1">5 Hour</mat-option>
            <mat-option value="1">6 Hour</mat-option>
            <mat-option value="1">7 Hour</mat-option>
            <mat-option value="1">8 Hour</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>
      <mat-grid-tile>
        <mat-form-field class="example-full-width">
          <mat-label>Max Try</mat-label>
          <input matInput formControlName="maxretry" placeholder="Max Try" value="" maxlength="3">
        </mat-form-field>
      </mat-grid-tile>
    </mat-grid-list>
    <div class="btn-sec">
      <button mat-raised-button type="submit" color="primary" class="Update-btn"[disabled]="isDisabled">Save</button>
      <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>
      <button mat-raised-button type="button" class="Discard-btn" (click)="openDialog()">Cancel</button>
    </div>
  </form>
</div>
<div *ngIf="deletemode">
  <h3 style="margin-top: 10px; font-weight: 500;">
    Are you sure to delete <b>{{delagentname}}</b>?
  </h3>
  <div class="btn-sec">
    <button mat-raised-button type="button" color="primary" class="Update-btn">Delete</button>
    &nbsp;
    <button mat-raised-button type="button" class="Discard-btn" (click)="openDialog()">Cancel</button>
  </div>
</div>