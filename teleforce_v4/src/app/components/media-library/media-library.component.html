
<div class="page-maindiv warap-height media-lib">
    <div class="brand-head">
        <div class="container-fluid">
            <div class="row">
                <div class="col-4">
                    <div class="d-flex">
                        <button mat-flat-button class="back mr-1" (click)="routingback()">
                            <mat-icon>keyboard_backspace</mat-icon>
                        </button>
                        <div class="flex-fill">
                            <p class="brand-head-text">Folders</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container-fluid">
        <div class="folder-header d-flex justify-content-between pt-3 pb-1">
            <div class="position-relative">
                <div class="folder-icon">
                    <i class="far fa-folder-open"></i>
                </div>
                <p class="media-envalop">{{folder_name}}</p>
            </div>
            <div class="d-inline-block">
                <div class="upload mr-1">
                    <input class="local-upload-file" type="file" name="dmyfile" id="document_upload" (change)='document_upload($event)'/>
                    <label for="document_upload"  class="local-upload">
                        <img src="assets/images/icon/uploadphoto.png">Add Document
                    </label>
                
                </div>
                <div class="upload mr-1">
                    
                        <input class="local-upload-file" type="file" name="myfile" id="upload" (change)='upload($event)'/>
                        <label for="upload"  class="local-upload">
                            <img src="assets/images/icon/uploadphoto.png">Add Photo / Video
                        </label>
                    
                </div>
              
                <button mat-stroked-button  class="ml-2 mt-3 {{msg?'active':''}}" (click)="bulkschedule()" >
                    Bulk Schedule
                </button>
                <button mat-stroked-button  class="ml-2 mt-3" (click)="refresh()">
                    <mat-icon>refresh</mat-icon>
                </button>
            </div>
            
        </div>
        
        <div class="folder-list">
            <div>
                
                <div class="card-body">
                    
                    <div class="table-view mt-2">
                        <!-- process bar -->
                       
                        <mat-progress-bar mode="indeterminate" *ngIf="spin"></mat-progress-bar>               
                        <div class="table-responsive">
                            
                            <table mat-table [dataSource]="dataSource">
        
                                <!--- Note that these columns can be defined in any order.
                                    The actual rendered columns are set as a property on the row definition" -->
        
                                <!-- position Column -->
                                <ng-container matColumnDef="bulk">
                                    <th mat-header-cell *matHeaderCellDef> </th>
                                    <td mat-cell *matCellDef="let element;let i = index;">
                                        <mat-checkbox (change)="addbulkschedule(element.F_id)"></mat-checkbox>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="position">
                                    <th mat-header-cell *matHeaderCellDef> Sr No .</th>
                                    <td mat-cell *matCellDef="let element;let i = index;">{{i+1+(interestpaginator.pageIndex * interestpaginator.pageSize)}}</td>
                                </ng-container>
                               
        
                                <!-- name Column -->
                                <ng-container matColumnDef="name">
                                    <th mat-header-cell *matHeaderCellDef> Name </th>
                                    <td mat-cell *matCellDef="let element"> 
                                        <div class="d-flex">
                                            <div>
                                                <mat-icon>image</mat-icon> 
                                            </div>
                                            <div class="ml-1 mt-1">
                                                {{element.file_name}}
                                            </div>
                                        </div>
                                        
                                    </td>
                                </ng-container>
                                <!-- Modi Column -->
                                <ng-container matColumnDef="modi">
                                    <th mat-header-cell *matHeaderCellDef>Upoad Time</th>
                                    <td mat-cell *matCellDef="let element;let i = index;">
                                        {{element.upload_date | date: 'medium'}}</td>
                                </ng-container>
                                <!-- Size Column -->
                                <ng-container matColumnDef="size">
                                    <th mat-header-cell *matHeaderCellDef> Size</th>
                                    <td mat-cell *matCellDef="let element;let i = index;">
                                        {{element.file_size/1000}} KB
                                    </td>
                                </ng-container>
                                <!-- action Column -->
                                <ng-container matColumnDef="action">
                                    <th mat-header-cell *matHeaderCellDef> Action </th>
                                    <td mat-cell *matCellDef="let element;let i = index">
                                        <!-- <button title="Edit" mat-icon-button color="primary"
                                            aria-label="Edit">
                                            <i class="fi-rr-pencil"></i>
                                        </button> -->
                                       
                                        
                                      
                                        <button *ngIf="element.file_type=='image/jpeg' || element.file_type=='image/jpeg' || element.file_type=='image/png' || element.file_type=='image/gif' || element.file_type=='video/mp4'" title="Edit" mat-icon-button color="primary" (click)="mediaPreview(element)"
                                            aria-label="Edit">
                                            <i class="fi-rr-eye"></i>
                                        </button>
                                        <button *ngIf="element.file_type=='application/pdf' || element.file_type=='application/msword' || element.file_type=='application/vnd.ms-powerpoint' || element.file_type=='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'" title="Edit"  mat-icon-button color="primary"
                                            aria-label="Edit">
                                            
                                            <a href="api/{{element.file_preview}}/{{element.file_name}}" download="{{element.file_name}}"><i class="fi-rr-cloud-download"></i></a>
                                        </button>
                                        <button  mat-icon-button color="primary" (click)="delete_file(element)"
                                            class="pencil"><i class="fi-rr-trash"></i></button>
                                    </td>
                                </ng-container>
        
                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                        </div>
                        <!-- paginator -->
                        <mat-paginator #interestpaginator [length]="interestLength" [pageSizeOptions]="[25,50,100]" showFirstLastButtons></mat-paginator>
                    </div>
                </div>
            </div>
        </div>

    </div>
 <!--   <div  *ngIf="spin" class="loader-div">
        <img  src="assets/img/1.gif" class="loader-img">
    </div>-->
</div>