<div class="warap-height-patient calender">
	<div class="brand-head">
		<div class="d-flex mt-3 container-fluid">
			<div class="flex-fill">
				<h1 class="h3 mb-2 text-gray-800 brand-head-text">Schedule Call / Appointment</h1>
			</div>

			<div class="card shadow mb-4 mt-3">
                <div class="card-body">
                    <div>
                        <button mat-raised-button color="accent" (click)="createfiledialog()" class="ml-2 mt-1">Upload
                            File Status</button>
                        <button mat-raised-button class="ml-2 mt-1 Download-temp">
                            <mat-icon>file_download</mat-icon>
                            <a href="/assets/sample_csv_schedule_upload.csv" target="_self" download>
                                Download Template
                            </a>
                        </button>
                        <div class="float-right d-flex">
                            <div>
                                <input type="file" id="fileUpload" name="fileUpload" multiple="multiple" accept=".csv"
                                    style="display:none;" />
                            </div>
                            <div>
                                <button mat-raised-button color="accent" class="ml-2 mt-2" (click)="onUploadCsv()">
                                    <mat-icon>file_upload</mat-icon>
                                    Upload CSV
                                </button>
                            </div>
                            <div *ngFor="let file of files" [@fadeInOut]="file.state" class="mt-2">
                                <span id="file-label">
                                    <div class="upload-progress">
                                        <mat-progress-bar [value]="file.progress" style="margin-top: -2px;">
                                        </mat-progress-bar>
                                        <span>{{file.data.name}} </span>
                                        <button class="upload-progress-btn" mat-icon-button (click)="retryFile(file)"
                                            *ngIf="file.canRetry" color="accent" title="Retry"
                                            aria-label="Example icon button with a menu icon">
                                            <mat-icon>refresh</mat-icon>
                                        </button>
                                        <button class="upload-progress-btn" mat-icon-button (click)="cancelFile(file)"
                                            *ngIf="file.canCancel" color="accent" title="warn"
                                            aria-label="Example icon button with a menu icon">
                                            <mat-icon>cancel</mat-icon>
                                        </button>
                                    </div>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

			<!-- <div class="flex-row-reverse">
                <button class="btn btn-danger"> Emergency Help </button>
            </div> -->
		</div>
	</div>
	<div class="container-fluid">
		<div class="table-view mt-3 mb-4">
			<div class="row m-0">
				<div class="col-md-3 p-0">
					<div class="contact-box">
						<mat-tab-group>
							<mat-tab>
								<ng-template mat-tab-label>
									<div class="contact-Search-box">
										<div class="">
											<!-- <i class="fas fa-tasks search-icon"></i> -->
											<div class="search"><b class="ml-1 mr-1">Schedule List</b></div>
										</div>
									</div>
								</ng-template>

								<div class="contact-list">
									<div class="contact-list-box" *ngFor="let request of meetinglist">
										<div class="contact-details">
											<div class="d-flex">
												<div class="flex-fill">
													<label title="Product Name ellipsis ">{{request.Subject}}</label>
												</div>

												<div *ngIf="request.EventType == 'Video'" class="flex-row-reverse">
													<div class="contactProductBtn" title="Accept"
														(click)="joinmeeting(request.original_meeting_link,request.user_id,request.customer_id)">
														<i class="fas fa-video"></i>
													</div>
												</div>
												<div *ngIf="request.EventType == 'Call'" class="flex-row-reverse">
													<div class="contactProductBtn" title="Accept"
														(click)="callmeeting(request.OwnerId,request.user_id)">
														<i class="fas fa-phone"></i>
													</div>
												</div>
											</div>
										</div>
										<div class="schedule-location-name">
											<p class="ellipsis"><span>{{request.Location}} ({{request.StartTime | date :
													'h:mm:ss a'}} - {{request.EndTime | date : 'h:mm:ss a'}})</span></p>
										</div>

									</div>
								</div>

							</mat-tab>

							<mat-tab>
								<ng-template mat-tab-label>
									<div class="contact-Search-box">
										<div class="">
											<div class="search"><b class="ml-2 mr-2">Upcoming Schedule List</b></div>
										</div>
									</div>
								</ng-template>

								<div class="contact-list">
									<div class="contact-list-box" *ngFor="let request of upcomingmeetinglist">
										<div class="contact-details">
											<div class="d-flex">
												<div class="flex-fill">
													<label title="Product Name ellipsis ">{{request.Subject}}</label>
												</div>

												<div *ngIf="request.EventType == 'Video'" class="flex-row-reverse">
													<div class="contactProductBtn" title="Accept"
														(click)="joinmeeting(request.original_meeting_link,request.user_id,request.customer_id)">
														<i class="fas fa-video"></i>
													</div>
												</div>
												<div *ngIf="request.EventType == 'Call'" class="flex-row-reverse">
													<div class="contactProductBtn" title="Accept"
														(click)="callmeeting(request.OwnerId,request.user_id)">
														<i class="fas fa-phone"></i>
													</div>
												</div>
											</div>
										</div>
										<div class="schedule-location-name">
											<p class="ellipsis"><span>{{request.Location}} ({{request.StartTime | date :
													'h:mm:ss a'}} - {{request.EndTime | date : 'h:mm:ss a'}})</span></p>
										</div>

									</div>
								</div>

							</mat-tab>

						</mat-tab-group>
					</div>
				</div>
				<div class="col-md-9 p-0">
					<ejs-schedule #scheduleObj (popupOpen)='onPopupOpen($event)' [eventSettings]="eventSettings"
						[timeScale]="timeScale" timezone="Asia/Calcutta" (actionComplete)='onActionComplete($event)'
						[selectedDate]="selectedDate" [startHour]="startHour" [endHour]="endHour">
						<ng-template #editorTemplate>
							<table class="custom-event-editor" width="100%" cellpadding="5">
								<tbody>
									<tr>
										<td class="e-textlabel">Customer Name</td>
										<td colspan="4">
											<input id="Subject" class="e-field e-input" type="text" value=""
												name="Subject" style="width: 100%" />

										</td>
									</tr>
									<tr>
										<td class="e-textlabel">Email</td>
										<td colspan="4">
											<input id="Location" class="e-field e-input" type="text" value=""
												name="Location" style="width: 100%" />
										</td>
									</tr>
									<tr>
										<td class="e-textlabel">Mobile</td>
										<td colspan="4">
											<input id="OwnerId" class="e-field e-input" type="text" value=""
												name="OwnerId" style="width: 100%" />
											<!-- <input type="text" id="EventType" name="EventType" class="e-field" style="width: 100%" /> -->
										</td>
									</tr>

									<tr>
										<td class="e-textlabel">From</td>
										<td colspan="4">
											<input id="StartTime" class="e-field" type="text" name="StartTime" />
										</td>
									</tr>
									<tr>
										<td class="e-textlabel">To</td>
										<td colspan="4">
											<input id="EndTime" class="e-field" type="text" name="EndTime" />
										</td>
									</tr>

									<tr>
										<td class="e-textlabel"> Type</td>
										<td colspan="4">
											<input id="EventType" class="e-field e-input" type="text" value=""
												name="EventType" style="width: 100%" />
											<!-- <input type="text" id="EventType" name="EventType" class="e-field" style="width: 100%" /> -->
										</td>
									</tr>
									<tr>
										<td class="e-textlabel">Notes</td>
										<td colspan="4">
											<textarea id="Description" class="e-field e-input" name="Description"
												rows="3" cols="50"
												style="width: 100%; height: 60px !important; resize: vertical"></textarea>
										</td>
									</tr>
								</tbody>
							</table>
						</ng-template>
					</ejs-schedule>
				</div>
			</div>
		</div>
	</div>
</div>