<div class="pt-3 warap-height">
    <div class="links">
        <div class="filter-part">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="page-head d-flex mb-2">
                            <div class="head-buttons float-right">
                                <div class="example-button-row d-flex">
                                    <button mat-flat-button routerLink="/email-campaign" class="mr-2 mt-2 head-color">
                                        <span class="material-icons">
                                            keyboard_backspace
                                        </span>
                                        Back
                                    </button>
                                    <!-- <button mat-flat-button class="mr-2 mt-2 head-color" routerLink="/email-campaign" >
                                        <span class="material-icons">
                                            keyboard_backspace
                                        </span>
                                        Campaign <b>{{campaignname | titlecase}}</b> Details
                                    </button> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="dashboard-body">
        <div class="container-fluid mb-3 mt-4">
            <div class="row">
                <div class="col-sm-3 col-12 mt-3">
                    <div class="card campaing-details-card">
                        <div class="card-body">
                            <!-- <div class="example-button-row d-flex">
                                <button mat-flat-button color="accent" class="mr-2 card-top-btn">
                                    Cloud Enabled
                                </button>
                                <button mat-flat-button color="accent" class="mr-2 card-top-btn">
                                    tracking Enabled
                                </button>
                            </div> -->
                            <div class="campaing-details mt-3">
                                <h1>
                                    Campaign: {{campaignname | titlecase}}
                                </h1>
                                <div class="mt-2">
                                    <p>
                                        Template :{{template}}
                                    </p>
                                    <p>
                                        Date: {{date | date: 'MMM d, y, h:mm:ss a'}}
                                    </p>
                                    <!-- <p>
                                        Success: {{status=='1'?'True':'Failed'}}
                                    </p> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-9 col-12">
                    <app-email-detail-analytics></app-email-detail-analytics>
                </div>
            </div>
            <div class="mt-3">
                <form [formGroup]="searchform" (ngSubmit)="Filtercontact()">
                    <div class="row col-md-12">
                        <div class="col-md-2">
                            <mat-form-field appearance="outline">
                                <mat-label>Start Date</mat-label>
                                <input matInput placeholder="Start Date" [matDatepicker]="startpicker" formControlName="startdate">
                                <mat-datepicker-toggle matSuffix [for]="startpicker"></mat-datepicker-toggle>
                                <mat-datepicker #startpicker tpicker></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-md-2">
                            <mat-form-field appearance="outline">
                                <mat-label>End Date</mat-label>
                                <input matInput placeholder="End Date" [matDatepicker]="endpicker" formControlName="enddate">
                                <mat-datepicker-toggle matSuffix [for]="endpicker"></mat-datepicker-toggle>
                                <mat-datepicker #endpicker tpicker></mat-datepicker>
                            </mat-form-field> 
                        </div>
                        <div class="col-md-2">
                            <mat-form-field appearance="outline" class="outline-field">
                                <mat-label class="mat-label">Name</mat-label>
                                <input type="text" matInput placeholder="name" formControlName="name">
                            </mat-form-field> 
                        </div>
                        <div class="col-md-2">
                            <mat-form-field appearance="outline" class="outline-field">
                                <mat-label class="mat-label">Email</mat-label>
                                <input type="text" matInput placeholder="email" formControlName="email">
                            </mat-form-field> 
                        </div>
                        <div class="col-md-2">
                            <mat-form-field appearance="outline" class="outline-field">
                                <mat-label class="mat-label">Status</mat-label>
                                <mat-select matInput formControlName="status">
                                    <mat-option value="0y">All</mat-option>

                                    <mat-option value="0">Sent</mat-option>
                                    <mat-option value="1">Delivered</mat-option>
                                    <!-- <mat-option value="2">Read</mat-option> -->
                                    <mat-option value="2">Open</mat-option>
                                    <mat-option value="3">Click</mat-option>

                                    <mat-option value="4">Bounce</mat-option>
                
                                    </mat-select>
                            </mat-form-field> 
                        </div>
                        <div class="col-md-4">
                            <button class="mt-2" mat-raised-button type="submit">Search</button>
                            <button class="ml-2" title="refresh" (click)="resetform()" mat-mini-fab color="warn" aria-label="Example icon button with a plus one icon">
                                <span class="material-icons">refresh</span>
                            </button>
                            <button class="ml-2" title="Regenerate Campaign" (click)="regenerateemailcampaign()" mat-raised-button color="primary" >Regenerate Campaign</button>
                        </div>
                    </div>
                </form>              
                
            </div>
        </div>
    </div>
    <div class="container-fluid mt-4 mb-3">
        <div class="card">
            <ng-template [ngIf]="logdataSource.loading$ | async">
                <mat-progress-bar mode="indeterminate"></mat-progress-bar>
            </ng-template>
            <div class="card-body">
                <!-- <button mat-raised-button color="primary" (click)="createExcel()">Excel</button> -->
                <div class="table-responsive mt-2">
                    <table mat-table [dataSource]="logdataSource" (matSortChange)="sortData($event)" matSort class="mat-elevation-z8">
    
                        <!-- Position Column -->
                        <ng-container matColumnDef="id">
                            <th mat-header-cell *matHeaderCellDef> Sr. No. </th>
                            <td mat-cell *matCellDef="let row;let i = index;" data-label="id">
                                {{i+1+(paginator.pageIndex * paginator.pageSize)}}
                            </td>
                        </ng-container>
                        <!-- Caller Name  Column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef> Name  </th>
                            <td mat-cell *matCellDef="let row"> 
                              {{row.name}}
                            </td>
                        </ng-container>

                        <!-- CallerNumber Column -->
                        <ng-container matColumnDef="emailid">
                            <th mat-header-cell *matHeaderCellDef>Email</th>
                            <td mat-cell *matCellDef="let row">
                                {{row.emailid}}
                            </td>
                        </ng-container>
                    
                        <!-- CallStartTime Column -->
                        <ng-container matColumnDef="date">
                            <th mat-header-cell *matHeaderCellDef  mat-sort-header>  Sent Date </th>
                            <td mat-cell *matCellDef="let row">
                                {{row.date | date:'dd-MM-yyyy HH:mm:ss':timezone}}
                            </td>
                        </ng-container>
                    
                        <!-- CallStartTime Column -->
                        <ng-container matColumnDef="delivery_date">
                            <th mat-header-cell *matHeaderCellDef  mat-sort-header>  Delivery Date </th>
                            <td mat-cell *matCellDef="let row">
                                <span *ngIf="row.email_status!=0">
                                    {{row.delivery_date | date:'dd-MM-yyyy HH:mm:ss':timezone}}
                                </span>
                            </td>
                        </ng-container>
                    
                        <!-- CallStartTime Column -->
                        <ng-container matColumnDef="open_date">
                            <th mat-header-cell *matHeaderCellDef  mat-sort-header>  Open Time </th>
                            <td mat-cell *matCellDef="let row">
                                {{row.open_date | date:'dd-MM-yyyy HH:mm:ss':timezone}}
                            </td>
                        </ng-container>
            
                        <!-- CallStatus Column -->
                        <ng-container matColumnDef="status">
                            <th mat-header-cell *matHeaderCellDef> Status </th>
                            <td mat-cell *matCellDef="let row">
                                {{row.email_status==1?'Delivered':''}}
                                {{row.email_status==0?'Sent':''}}
                                {{row.email_status==2?'Open':''}}
                                {{row.email_status==3?'Click':''}}
                                {{row.email_status==4?'Bounce':''}}                            </td>
                        </ng-container>
                        <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef> Action </th>
                            <td mat-cell *matCellDef="let row">
                              <!-- <button  mat-icon-button color="info" title="Login">
                                <mat-icon (click)="directlogin(row.emailid)" >login</mat-icon>
                              </button> -->
                              <button (click)="directlogin(row.emailid)" title="Edit" mat-icon-button color="primary"
                              aria-label="View">
                              <i class="fa fa-eye"></i>
                          </button>
                            </td>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                </div>
                <mat-paginator #paginator [length]="Length" [pageSize]="50"
                [pageSizeOptions]="[50,100,500]" showFirstLastButtons="true"></mat-paginator>
            </div>
        </div>
    </div>
</div>